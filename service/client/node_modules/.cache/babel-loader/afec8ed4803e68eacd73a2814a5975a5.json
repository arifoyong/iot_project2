{"ast":null,"code":"import _defineProperty from\"D:\\\\MyLab\\\\iot_project\\\\service\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _slicedToArray from\"D:\\\\MyLab\\\\iot_project\\\\service\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{useState,useEffect}from\"react\";import Modal from'react-bootstrap/Modal';import Button from'react-bootstrap/Button';import ButtonToolbar from'react-bootstrap/ButtonToolbar';import Form from'react-bootstrap/Form';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';function MyModal(props){var show=props.show,handleClose=props.handleClose,updateData=props.updateData;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),dt=_useState2[0],setForm=_useState2[1];useEffect(function(){var URI=\"/api/device/\".concat(props.idNo);fetch(URI).then(function(res){return res.json();}).then(function(json){setForm(json);});},[props.idNo]);var handleFormChange=function handleFormChange(e){e.persist();if(e.target.name==='alertActive'){setForm(function(dt){return _objectSpread({},dt,_defineProperty({},e.target.name,e.target.checked));});}else{setForm(function(dt){return _objectSpread({},dt,_defineProperty({},e.target.name,e.target.value));});}};var handleSubmit=function handleSubmit(e){e.preventDefault();fetch('/api/device',{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(dt)}).then(function(response){if(response.ok){updateData();}else{console.log(\"Failed to update data\");}});handleClose();};return React.createElement(Modal,{size:\"lg\",show:show,onHide:handleClose},React.createElement(Modal.Header,{closeButton:true},React.createElement(Modal.Title,null,\"Edit Device Settings\")),React.createElement(Modal.Body,null,React.createElement(Form,null,React.createElement(Row,null,React.createElement(Col,null,React.createElement(Form.Group,{controlId:\"deviceId\"},React.createElement(Form.Label,null,\"Device ID\"),React.createElement(Form.Control,{disabled:true,type:\"number\",name:\"id\",value:dt.id,onChange:handleFormChange})),React.createElement(Form.Group,{controlId:\"location\"},React.createElement(Form.Label,null,\"Location\"),React.createElement(Form.Control,{type:\"text\",name:\"location\",value:dt.location,onChange:handleFormChange})),React.createElement(Form.Group,{controlId:\"alertactive\"},React.createElement(Form.Check,{type:\"checkbox\",label:\"Activate alert\",name:\"alertActive\",checked:dt.alertActive,onChange:handleFormChange}))),React.createElement(Col,null,React.createElement(Form.Group,{controlId:\"temp_lcl\"},React.createElement(Form.Label,null,\"Temperature LCL\"),React.createElement(Form.Control,{type:\"number\",name:\"temp_lcl\",value:dt.temp_lcl,onChange:handleFormChange})),React.createElement(Form.Group,{controlId:\"temp_ucl\"},React.createElement(Form.Label,null,\"Temperature UCL\"),React.createElement(Form.Control,{type:\"number\",name:\"temp_ucl\",value:dt.temp_ucl,onChange:handleFormChange})),React.createElement(Form.Group,{controlId:\"humi_lcl\"},React.createElement(Form.Label,null,\"Humidity LCL\"),React.createElement(Form.Control,{type:\"number\",name:\"humi_lcl\",value:dt.humi_lcl,onChange:handleFormChange})),React.createElement(Form.Group,{controlId:\"humi_ucl\"},React.createElement(Form.Label,null,\"Humidity UCL\"),React.createElement(Form.Control,{type:\"number\",name:\"humi_ucl\",value:dt.humi_ucl,onChange:handleFormChange})),React.createElement(Form.Group,{controlId:\"batt_lcl\"},React.createElement(Form.Label,null,\"Battery LCL\"),React.createElement(Form.Control,{type:\"number\",name:\"batt_lcl\",value:dt.batt_lcl,onChange:handleFormChange})),React.createElement(Form.Group,{controlId:\"batt_ucl\"},React.createElement(Form.Label,null,\"Battery UCL\"),React.createElement(Form.Control,{type:\"number\",name:\"batt_ucl\",value:dt.batt_ucl,onChange:handleFormChange})))),React.createElement(ButtonToolbar,null,React.createElement(Button,{className:\"mybtn\",variant:\"primary\",type:\"submit\",onClick:handleSubmit},\"Submit\"),React.createElement(Button,{className:\"mybtn\",variant:\"danger\",onClick:handleClose},\"Cancel\")))));}export default MyModal;","map":{"version":3,"sources":["D:/MyLab/iot_project/service/client/src/components/MyModal.js"],"names":["React","useState","useEffect","Modal","Button","ButtonToolbar","Form","Row","Col","MyModal","props","show","handleClose","updateData","dt","setForm","URI","idNo","fetch","then","res","json","handleFormChange","e","persist","target","name","checked","value","handleSubmit","preventDefault","method","headers","body","JSON","stringify","response","ok","console","log","id","location","alertActive","temp_lcl","temp_ucl","humi_lcl","humi_ucl","batt_lcl","batt_ucl"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Button from 'react-bootstrap/Button'\r\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar'\r\nimport Form from 'react-bootstrap/Form'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Col from 'react-bootstrap/Col'\r\n\r\nfunction MyModal(props) {\r\n  const { show, handleClose, updateData } = props;\r\n  const [dt, setForm] = useState({})\r\n\r\n  useEffect(() => {\r\n    let URI = `/api/device/${props.idNo}`\r\n    fetch(URI).then(res => res.json())\r\n      .then(json => {\r\n        setForm(json)\r\n      })\r\n  }, [props.idNo])\r\n\r\n  const handleFormChange = e => {\r\n    e.persist()\r\n    if (e.target.name === 'alertActive') {\r\n      setForm(dt => ({ ...dt, [e.target.name]: e.target.checked }))\r\n    } else {\r\n      setForm(dt => ({ ...dt, [e.target.name]: e.target.value }))\r\n    }\r\n  }\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault()\r\n\r\n    fetch('/api/device', {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(dt)\r\n    }).then(response => {\r\n      if (response.ok) {\r\n        updateData()\r\n      } else {\r\n        console.log(\"Failed to update data\")\r\n      }\r\n    })\r\n\r\n    handleClose()\r\n  }\r\n\r\n  return (\r\n    <Modal size=\"lg\" show={show} onHide={handleClose}>\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>Edit Device Settings</Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <Form>\r\n          <Row>\r\n            <Col>\r\n              <Form.Group controlId=\"deviceId\">\r\n                <Form.Label>Device ID</Form.Label>\r\n                <Form.Control disabled type=\"number\" name=\"id\" value={dt.id} onChange={handleFormChange} />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"location\">\r\n                <Form.Label>Location</Form.Label>\r\n                <Form.Control type=\"text\" name=\"location\" value={dt.location} onChange={handleFormChange} />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"alertactive\">\r\n                <Form.Check type=\"checkbox\" label=\"Activate alert\" name=\"alertActive\" checked={dt.alertActive} onChange={handleFormChange} />\r\n              </Form.Group>\r\n            </Col>\r\n            <Col>\r\n              <Form.Group controlId=\"temp_lcl\">\r\n                <Form.Label>Temperature LCL</Form.Label>\r\n                <Form.Control type=\"number\" name=\"temp_lcl\" value={dt.temp_lcl} onChange={handleFormChange} />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"temp_ucl\">\r\n                <Form.Label>Temperature UCL</Form.Label>\r\n                <Form.Control type=\"number\" name=\"temp_ucl\" value={dt.temp_ucl} onChange={handleFormChange} />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"humi_lcl\">\r\n                <Form.Label>Humidity LCL</Form.Label>\r\n                <Form.Control type=\"number\" name=\"humi_lcl\" value={dt.humi_lcl} onChange={handleFormChange} />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"humi_ucl\">\r\n                <Form.Label>Humidity UCL</Form.Label>\r\n                <Form.Control type=\"number\" name=\"humi_ucl\" value={dt.humi_ucl} onChange={handleFormChange} />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"batt_lcl\">\r\n                <Form.Label>Battery LCL</Form.Label>\r\n                <Form.Control type=\"number\" name=\"batt_lcl\" value={dt.batt_lcl} onChange={handleFormChange} />\r\n              </Form.Group>\r\n              <Form.Group controlId=\"batt_ucl\">\r\n                <Form.Label>Battery UCL</Form.Label>\r\n                <Form.Control type=\"number\" name=\"batt_ucl\" value={dt.batt_ucl} onChange={handleFormChange} />\r\n              </Form.Group>\r\n            </Col>\r\n          </Row>\r\n\r\n\r\n          <ButtonToolbar>\r\n            <Button className=\"mybtn\" variant=\"primary\" type=\"submit\" onClick={handleSubmit}>\r\n              Submit\r\n          </Button>\r\n            <Button className=\"mybtn\" variant=\"danger\" onClick={handleClose}>\r\n              Cancel\r\n          </Button>\r\n          </ButtonToolbar>\r\n        </Form>\r\n\r\n      </Modal.Body>\r\n\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default MyModal;"]},"metadata":{},"sourceType":"module"}